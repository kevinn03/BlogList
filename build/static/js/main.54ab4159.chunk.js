(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(16),a=n.n(r),s=n(4),i=n.n(s),o=n(5),u=n(2),l=n(0),j=function(e){var t=e.blog,n=Object(c.useState)(!1),r=Object(u.a)(n,2),a=r[0],s=r[1],i=function(){return s(!a)};return Object(l.jsx)("div",{style:{paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5},children:!1===a?Object(l.jsxs)("div",{children:[t.title," ",t.author," ",Object(l.jsx)("button",{onClick:i,children:"view"})]}):Object(l.jsxs)("div",{children:[t.title," ",t.author," ",Object(l.jsx)("button",{onClick:i,children:"hide"}),Object(l.jsx)("div",{children:t.url}),Object(l.jsxs)("div",{children:["likes:",t.likes," ",Object(l.jsx)("button",{children:"like"})]}),Object(l.jsx)("div",{children:t})]})})},d=n(6),b=n.n(d),h="/api/blogs",O=null,p={setToken:function(e){O="bearer ".concat(e)},getAll:function(){return b.a.get(h).then((function(e){return e.data}))},create:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:O}},e.next=3,b.a.post(h,t,n);case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g={login:function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function f(e){return null===e.message?null:Object(l.jsx)("div",{className:"hide note",children:e.message})}var v=function(e){var t=Object(c.useState)(!1),n=Object(u.a)(t,2),r=n[0],a=n[1],s={display:r?"none":""},i={display:r?"":"none"},o=function(){a(!r)};return Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{style:s,children:Object(l.jsx)("button",{onClick:o,children:e.buttonLabel})}),Object(l.jsxs)("div",{style:i,children:[e.children,Object(l.jsx)("button",{onClick:o,children:"cancel"})]})]})},x=function(e){var t=e.handleCreate,n=Object(c.useState)(""),r=Object(u.a)(n,2),a=r[0],s=r[1],i=Object(c.useState)(""),o=Object(u.a)(i,2),j=o[0],d=o[1],b=Object(c.useState)(""),h=Object(u.a)(b,2),O=h[0],p=h[1];return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Create new"}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(a,j,O),s(""),d(""),p("")},children:[Object(l.jsxs)("div",{children:["Title:",Object(l.jsx)("input",{type:"text",name:"Title",value:a,onChange:function(e){s(e.target.value)}})]}),Object(l.jsxs)("div",{children:["Author:",Object(l.jsx)("input",{type:"text",name:"Author",value:j,onChange:function(e){d(e.target.value)}})]}),Object(l.jsxs)("div",{children:["Url:",Object(l.jsx)("input",{type:"text",name:"Url",value:O,onChange:function(e){p(e.target.value)}})]}),Object(l.jsx)("button",{type:"submit",children:"Create "})]})]})},m=function(e){var t=e.handleLogin,n=Object(c.useState)(""),r=Object(u.a)(n,2),a=r[0],s=r[1],i=Object(c.useState)(""),o=Object(u.a)(i,2),j=o[0],d=o[1];return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"log into application"}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(a,j),s(""),d("")},children:[Object(l.jsxs)("div",{children:["username",Object(l.jsx)("input",{type:"texts",name:"Usernmae",value:a,onChange:function(e){s(e.target.value)}})]}),Object(l.jsxs)("div",{children:["password",Object(l.jsx)("input",{type:"password",name:"Password",value:j,onChange:function(e){d(e.target.value)}})]}),Object(l.jsx)("button",{type:"submit",children:"Login"})]})]})},w=(n(41),function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(null),s=Object(u.a)(a,2),d=s[0],b=s[1],h=Object(c.useState)(""),O=Object(u.a)(h,2),w=O[0],k=O[1];Object(c.useEffect)((function(){p.getAll().then((function(e){return r(e)}))}),[]),Object(c.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogappUser");if(e){var t=JSON.parse(e);b(t),p.setToken(t.token)}}),[]);var y=function(e,t){k(e);var n=document.querySelector(".note");n.classList.toggle("hide"),n.classList.toggle(t),setTimeout((function(){k(null),n.classList.toggle("hide"),n.classList.toggle(t)}),5e3)},S=function(){var e=Object(o.a)(i.a.mark((function e(t,n){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.login({username:t,password:n});case 3:c=e.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(c)),p.setToken(c.token),b(c),y("".concat(c.name," has successfully logged in"),"success"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),y("Wrong username or password","fail");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(e){window.localStorage.removeItem("loggedBlogappUser"),b(null),p.setToken(null)},L=function(){var e=Object(o.a)(i.a.mark((function e(t,c,a){var s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s={title:t,author:c,url:a,user:d},console.log(d),e.next=5,p.create(s);case 5:o=e.sent,r(n.concat(o)),y("A new blog ".concat(o.title," by ").concat(o.author," added"),"success"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),y("".concat(e.t0.response.data.error),"fail");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,c){return e.apply(this,arguments)}}();return Object(l.jsx)("div",{children:null===d?Object(l.jsx)("div",{children:Object(l.jsxs)("div",{children:[Object(l.jsx)(f,{message:w}),Object(l.jsx)(m,{handleLogin:S})]})}):Object(l.jsx)("div",{children:Object(l.jsxs)("div",{children:[Object(l.jsx)(f,{message:w}),Object(l.jsx)("h2",{children:"blogs"}),Object(l.jsxs)("p",{children:["".concat(d.name," logged in")," ",Object(l.jsx)("button",{onClick:C,children:"Logout"})]}),Object(l.jsx)(v,{buttonLabel:"create new blog",children:Object(l.jsx)(x,{handleCreate:L,user:d})}),n.map((function(e){return Object(l.jsx)(j,{blog:e},e.id)}))]})})})});a.a.render(Object(l.jsx)(w,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.54ab4159.chunk.js.map